<html>
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
<link rel="stylesheet" href="../css/style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>

function ressource_edit(val,type,table){
	
}
function ressource_delete(val,type,table){
	console.log(this,arguments);
}
function ressource_cell(args,val,type){
	function btn(ico,oc){return '<button type="button" onclick="'+oc+'" class="btn btn-default"><span class="glyphicon glyphicon-'+ico+'"></span></button>';}
	if(type=='id')
		return '<div class="btn-group" style="display:flex" title="'+val+'">'
			+btn('trash'   ,"DB('delete','"+args.table+"/"+val+"').success(ressource_delete)")
			+btn('pencil'  ,"DB('option','"+args.table+"',{context:{table:'"+args.table+"',target:'#Modal .modal-body',id:'"+val+"'}}).success(DB.toForm);$('#Modal').modal('show');")
			+btn('eye-open',"alert('"+val+"')")
			+"</div>";
	if(type=='href')
		return '<a href="'+val+'">'+val+'</a>';
	if(['fichedev','bdd','photo'].indexOf(type)>=0)
		return val*1?'&#10004;':'&#10008;';
	return val;
}
</script>
<body>

<div class="modal fade" id="Modal">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">&nbsp;</h4>
			</div>
			<div class="modal-body"></div>
		</div>
	</div>
</div>

<button onclick="DB('option','ressource',{context:{target:'#Modal .modal-body'}}).success(DB.toForm);$('#Modal').modal('show');">form</button>
<button onclick="DB('get'   ,'ressource',{context:{target:'#out',cell:ressource_cell,table:'ressource',table_class:'table-condensed'}}).success(DB.toList);">list</button>
<div id="out"></div>
</body>
<script src="ajax.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
</html>

